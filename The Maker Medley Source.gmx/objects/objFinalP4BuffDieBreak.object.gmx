<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>sprFinalBossRNG</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>-11</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>timer = 0;
sineVal = 0;
particleTimer = 0;
surf = -4;
glowSurf = -4;
glowAlpha = 0;
trailNum = 0;
trailNumMax = 10;

fade = 0;
image_speed = 0;
image_xscale = 0.7;
image_yscale = 0.7;
vspeed = 8;
//audio_play_sound(sndFinalP4BuffDieAppear, 0, 0);

var i;
noTrailNumber = -3000;
for(i=trailNumMax-1;i&gt;=0;i--){
    xprev[i] = noTrailNumber;
    yprev[i] = noTrailNumber;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="1" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (surface_exists(surf))
    surface_free(surf);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="2">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>// Update trail positions
if (trailNum &gt; 0){
    for(var i=ceil(trailNum); i&gt;0; i--){
        xprev[i] = xprev[i-1];
        yprev[i] = yprev[i-1];
    }
    if (fade == 0){
        xprev[0] = x;
        yprev[0] = y;
    }else{
        xprev[0] = noTrailNumber;
        yprev[0] = noTrailNumber;
    }
}else if (xprev[0] != noTrailNumber){
    for(var i=(trailNumMax-1); i&gt;=0; i--){
        xprev[i] = noTrailNumber;
        yprev[i] = noTrailNumber;
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (fade == 0){
    if (vspeed &lt; 24){
        vspeed += 0.2;
    }
    
    particleTimer ++;
    /*
    var _inst, _dir;
    var _partNum = 3;
    repeat(_partNum){
        _dir = random(360);
        _inst = instance_create(x + (sprite_width/4)*dcos(_dir), y + (sprite_height/4)*(-dsin(_dir)), objFinalRNGDiePart);
        _inst.direction = random(360);
        _inst.speed = 2;
        _inst.friction = -0.065;
        _inst.dieAlpha = 3;
        _inst.image_alpha = 1;
    }*/
    
    if (glowAlpha &lt; 1){
        glowAlpha = min(glowAlpha + 0.1, 1);
    }
    
    if ((bbox_bottom+1) &gt;= 1056){  // y position 1056 is the top of the reflectors
        y -= ((bbox_bottom+1) - 1056);
        with (objFinalRNGDie){
            instance_destroy();  // failsafe
        }
        
        var _inst;
        // Left Half
        _inst = instance_create(x, y, objFinalRNGDie);
        _inst.sprite_index = sprFinalBossRNGFragment;
        _inst.image_index = 0;
        _inst.part = -1;
        
        _inst.hspeed = -4.15;
        _inst.vspeed = -9.875;
        _inst.gravity = 0.275;
        
        _inst.latchedOn = false;
        _inst.positionXOff = 0;
        _inst.appearXDiff = 0;
        _inst.appearYDiff = 0;
        _inst.appearLerp = 1;
        
        with (_inst){
            for(var i=other.trailNumMax-1;i&gt;=0;i--){
                xprev[i] = other.xprev[i];
                yprev[i] = other.yprev[i];
            }
            trailNum = other.trailNum;
        }
        
        // Right Half
        _inst = instance_create(x, y, objFinalRNGDie);
        _inst.sprite_index = sprFinalBossRNGFragment;
        _inst.image_index = 1;
        _inst.part = 1;
        
        _inst.hspeed = 3.65;
        _inst.vspeed = -10.65;
        _inst.gravity = 0.275;
        
        _inst.latchedOn = false;
        _inst.positionXOff = 5;
        _inst.appearXDiff = 0;
        _inst.appearYDiff = 0;
        _inst.appearLerp = 1;
        
        with (_inst){
            for(var i=other.trailNumMax-1;i&gt;=0;i--){
                xprev[i] = other.xprev[i];
                yprev[i] = other.yprev[i];
            }
            trailNum = other.trailNum;
        }
        
        with (objFinalScreenshake){
            shake = 5;
        }
        instance_create(x, y, objFinalBossEndDieEffect);
        audio_play_sound(sndFinalRNGPower, 0, 0);
        audio_play_sound(sndMakerSampleGlass, 0, 0);
        
        speed = 0;
        gravity = 0; // not used, but I'm future-proofing
        fade = -1;
    }
    
    if (trailNum &lt; (trailNumMax)){
        trailNum = min(trailNum+1, trailNumMax);
    }
}
if (fade == -1){
    trailNum = max(trailNum-1, 0);
    if (trailNum &lt;= 0){
        instance_destroy();
    }
}else{
    if (trailNum &lt; (trailNumMax)){
        trailNum = min(trailNum+1, trailNumMax);
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="objPlayer">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (fade == 0){
    scrKillPlayer();
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="5">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (surface_exists(surf))
    surface_free(surf);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if ((instance_exists(objFinalRNGDiePart) &amp;&amp; !instance_exists(objFinalBossChar_4)) || trailNum &gt; 0){
    draw_set_blend_mode(bm_add);
    
    if (instance_exists(objFinalRNGDiePart) &amp;&amp; !instance_exists(objFinalBossChar_4)){
        with (objFinalRNGDiePart){
            draw_self();
        }
    }
    
    //Draw trail
    if (trailNum &gt;= 0){
        var _imagesPerPos = 3;
        if (_imagesPerPos &gt;= 1){
            var _interpAmt, _interpVal;
            for(var i=(floor(trailNum-1)*_imagesPerPos); i&gt;0; i-=1){
                _interpVal = (i/_imagesPerPos);
                _interpAmt = _interpVal - floor(_interpVal);
                var _x1, _x2, _y1, _y2;
                _x1 = xprev[floor(_interpVal)];
                _y1 = yprev[floor(_interpVal)];
                if (_interpAmt &lt; 0.02){
                    _x2 = _x1;
                    _y2 = _y1;
                }else{
                    _x2 = xprev[ceil(_interpVal)];
                    _y2 = yprev[ceil(_interpVal)];
                }
                if ((_x1 != noTrailNumber &amp;&amp; _x2 != noTrailNumber) &amp;&amp; (_y1 != noTrailNumber &amp;&amp; _y2 != noTrailNumber)){
                    draw_sprite_ext(sprite_index, image_index, lerp(_x1, _x2, _interpAmt), lerp(_y1, _y2, _interpAmt), (1 - (_interpVal+1)/(trailNumMax+1))*image_xscale, (1 - (_interpVal+1)/(trailNumMax+1))*image_yscale, 0, c_white, 0.6);
                }
            }
        }
    }
    
    draw_set_blend_mode(bm_normal);
}

if (fade == 0){
    if (global.finalGlowEnabled &amp;&amp; global.extraEffects){
        //Set up surface
        if (!surface_exists(surf)){
            surf = surface_create(256, 256);
        }
        if (surface_exists(surf)){
            surface_set_target(surf);
            draw_clear_alpha(c_black, 0);
            
            draw_sprite_ext(sprite_index, image_index, 128, 128, 1, 1, 0, c_white, 1);
            
            surface_reset_target();
        }
        
        //Draw surface (or, as a failsafe, the sprite)
        if (surface_exists(surf)){
            if (glowAlpha &gt; 0){
                shader_set(shdFinalWhite);
                shader_set_uniform_f(global.finalGlowHandle, 256*image_xscale, 256*image_yscale, 20, glowAlpha * 1);
                draw_surface_ext(surf, x-128*image_xscale, y-128*image_yscale, image_xscale, image_yscale, 0, c_white, 1);
                shader_reset();
            }
            draw_surface_ext(surf, x-128*image_xscale, y-128*image_yscale, image_xscale, image_yscale, 0, c_white, 1);
        }else{
            // The glow shader will not work with a sprite. It needs excess space around the image being drawn
            draw_sprite_ext(sprite_index, image_index, x, y, image_xscale, image_yscale, 0, c_white, 1);
        }
    }else{
        draw_sprite_ext(sprite_index, image_index, x, y, image_xscale, image_yscale, 0, c_white, 1);
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
